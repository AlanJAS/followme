#!/bin/sh

while [ -n "$2" ] ; do
    case "$1" in
      	-b | --bundle-id)     export SUGAR_BUNDLE_ID="$2" ;;
      	-a | --activity-id)   export SUGAR_ACTIVITY_ID="$2" ;;
      	-o | --object-id)     export SUGAR_OBJECT_ID="$2" ;;
	-u | --uri)           export SUGAR_URI="$2" ;;
	*) echo unknown argument $1 $2 ;;
    esac
    shift;shift
done

cd lua
./lua bobot-server.lua&
cd ../pythonAPI
./waitforbobot.py
cd ..

sugar-activity -a $SUGAR_ACTIVITY_ID activity.Activity

kill `ps ax | grep bobot-server | grep -v grep | awk '{print $1}'`
